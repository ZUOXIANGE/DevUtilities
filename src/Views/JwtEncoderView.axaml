<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:DevUtilities.ViewModels"
             x:Class="DevUtilities.Views.JwtEncoderView"
             x:DataType="vm:JwtEncoderViewModel">

  <Design.DataContext>
    <vm:JwtEncoderViewModel/>
  </Design.DataContext>

  <ScrollViewer>
    <StackPanel Margin="20" Spacing="20">
      
      <!-- æ ‡é¢˜åŒºåŸŸ -->
      <StackPanel Spacing="6">
        <TextBlock Text="JWTç¼–ç å™¨" 
                   FontSize="26" 
                   FontWeight="Bold" 
                   Foreground="{DynamicResource SystemAccentColor}"/>
        <TextBlock Text="JWTä»¤ç‰Œç”Ÿæˆã€è§£ç å’ŒéªŒè¯å·¥å…·" 
                   FontSize="14" 
                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
      </StackPanel>

      <!-- JWTç”ŸæˆåŒºåŸŸ -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="16">
        <StackPanel Spacing="12">
          <TextBlock Text="JWTç”Ÿæˆ" FontWeight="SemiBold" FontSize="16"/>
          
          <Grid ColumnDefinitions="*,20,*,20,*" RowDefinitions="Auto,*">
            
            <!-- HeaderåŒºåŸŸ -->
            <StackPanel Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Spacing="8">
              <TextBlock Text="Header (å¤´éƒ¨)" FontWeight="SemiBold"/>
              <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}" 
                      CornerRadius="6" 
                      Padding="8"
                      Height="200">
                <TextBox Text="{Binding HeaderInput}" 
                        AcceptsReturn="True" 
                        TextWrapping="Wrap"
                        FontFamily="Consolas"
                        FontSize="12"
                        Background="Transparent"
                        BorderThickness="0"/>
              </Border>
            </StackPanel>

            <!-- åˆ†éš”ç¬¦1 -->
            <Border Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" 
                    Background="{DynamicResource SystemControlForegroundBaseLowBrush}" 
                    Width="1" 
                    Margin="0,20,0,0"/>

            <!-- PayloadåŒºåŸŸ -->
            <StackPanel Grid.Column="2" Grid.Row="0" Grid.RowSpan="2" Spacing="8">
              <TextBlock Text="Payload (è½½è·)" FontWeight="SemiBold"/>
              <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}" 
                      CornerRadius="6" 
                      Padding="8"
                      Height="200">
                <TextBox Text="{Binding PayloadInput}" 
                        AcceptsReturn="True" 
                        TextWrapping="Wrap"
                        FontFamily="Consolas"
                        FontSize="12"
                        Background="Transparent"
                        BorderThickness="0"/>
              </Border>
            </StackPanel>

            <!-- åˆ†éš”ç¬¦2 -->
            <Border Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" 
                    Background="{DynamicResource SystemControlForegroundBaseLowBrush}" 
                    Width="1" 
                    Margin="0,20,0,0"/>

            <!-- å¯†é’¥åŒºåŸŸ -->
            <StackPanel Grid.Column="4" Grid.Row="0" Grid.RowSpan="2" Spacing="8">
              <TextBlock Text="Secret (å¯†é’¥)" FontWeight="SemiBold"/>
              <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}" 
                      CornerRadius="6" 
                      Padding="8"
                      Height="200">
                <StackPanel Spacing="8">
                  <TextBox Text="{Binding SecretKey}" 
                          AcceptsReturn="True" 
                          TextWrapping="Wrap"
                          FontFamily="Consolas"
                          FontSize="12"
                          Background="Transparent"
                          BorderThickness="0"
                          Height="120"/>
                  
                  <StackPanel Spacing="6">
                    <Button Content="ç”Ÿæˆéšæœºå¯†é’¥" 
                           Command="{Binding UseExampleCommand}" 
                           HorizontalAlignment="Stretch"/>
                    <Button Content="ä»Žæ–‡ä»¶åŠ è½½" 
                           Command="{Binding ClearCommand}" 
                           HorizontalAlignment="Stretch"/>
                  </StackPanel>
                </StackPanel>
              </Border>
            </StackPanel>
          </Grid>
        </StackPanel>
      </Border>

      <!-- ç”ŸæˆæŒ‰é’® -->
      <Button Content="ðŸš€ ç”ŸæˆJWTä»¤ç‰Œ" 
              Command="{Binding EncodeJwtCommand}" 
              HorizontalAlignment="Center"
              Classes="accent"
              FontSize="16"
              Padding="24,12"/>

      <!-- JWTä»¤ç‰Œè¾“å‡ºåŒºåŸŸ -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="16">
        <StackPanel Spacing="12">
          <TextBlock Text="JWTä»¤ç‰Œè¾“å‡º" FontWeight="SemiBold" FontSize="16"/>
          
          <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}" 
                  CornerRadius="6" 
                  Padding="12"
                  MinHeight="100">
            <Grid RowDefinitions="*,Auto">
              <TextBox Grid.Row="0"
                      Text="{Binding JwtToken}" 
                      AcceptsReturn="True" 
                      TextWrapping="Wrap"
                      FontFamily="Consolas"
                      FontSize="12"
                      Background="Transparent"
                      BorderThickness="0"
                      IsReadOnly="True"
                      Watermark="ç”Ÿæˆçš„JWTä»¤ç‰Œå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."/>
              
              <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
                <Button Content="å¤åˆ¶ä»¤ç‰Œ" Command="{Binding CopyTokenCommand}" Classes="accent"/>
                <Button Content="ä¿å­˜åˆ°æ–‡ä»¶" Command="{Binding UseExampleCommand}"/>
                <Button Content="æ¸…ç©º" Command="{Binding ClearCommand}"/>
              </StackPanel>
            </Grid>
          </Border>
        </StackPanel>
      </Border>

      <!-- JWTè§£ç åŒºåŸŸ -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="16">
        <StackPanel Spacing="12">
          <TextBlock Text="JWTè§£ç éªŒè¯" FontWeight="SemiBold" FontSize="16"/>
          
          <!-- JWTè¾“å…¥ -->
          <StackPanel Spacing="8">
            <TextBlock Text="è¾“å…¥JWTä»¤ç‰Œè¿›è¡Œè§£ç "/>
            <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}" 
                    CornerRadius="6" 
                    Padding="8"
                    Height="80">
              <TextBox Text="{Binding JwtToken}" 
                      AcceptsReturn="True" 
                      TextWrapping="Wrap"
                      FontFamily="Consolas"
                      FontSize="12"
                      Background="Transparent"
                      BorderThickness="0"
                      Watermark="ç²˜è´´JWTä»¤ç‰Œ..."/>
            </Border>
            
            <StackPanel Orientation="Horizontal" Spacing="8">
              <Button Content="è§£ç JWT" Command="{Binding DecodeJwtCommand}" Classes="accent"/>
              <Button Content="éªŒè¯ç­¾å" Command="{Binding VerifyJwtCommand}"/>
              <Button Content="ç²˜è´´" Command="{Binding CopyTokenCommand}"/>
            </StackPanel>
          </StackPanel>

          <!-- è§£ç ç»“æžœ -->
          <Grid ColumnDefinitions="*,20,*" RowDefinitions="Auto,*">
            
            <!-- è§£ç Header -->
            <StackPanel Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Spacing="8">
              <TextBlock Text="è§£ç Header" FontWeight="SemiBold"/>
              <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}" 
                      CornerRadius="6" 
                      Padding="8"
                      Height="150">
                <TextBox Text="{Binding DecodedHeader}" 
                        AcceptsReturn="True" 
                        TextWrapping="Wrap"
                        FontFamily="Consolas"
                        FontSize="12"
                        Background="Transparent"
                        BorderThickness="0"
                        IsReadOnly="True"/>
              </Border>
            </StackPanel>

            <!-- åˆ†éš”ç¬¦ -->
            <Border Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" 
                    Background="{DynamicResource SystemControlForegroundBaseLowBrush}" 
                    Width="1" 
                    Margin="0,20,0,0"/>

            <!-- è§£ç Payload -->
            <StackPanel Grid.Column="2" Grid.Row="0" Grid.RowSpan="2" Spacing="8">
              <TextBlock Text="è§£ç Payload" FontWeight="SemiBold"/>
              <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}" 
                      CornerRadius="6" 
                      Padding="8"
                      Height="150">
                <TextBox Text="{Binding DecodedPayload}" 
                        AcceptsReturn="True" 
                        TextWrapping="Wrap"
                        FontFamily="Consolas"
                        FontSize="12"
                        Background="Transparent"
                        BorderThickness="0"
                        IsReadOnly="True"/>
              </Border>
            </StackPanel>
          </Grid>
        </StackPanel>
      </Border>

      <!-- éªŒè¯ç»“æžœæ˜¾ç¤º -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="12"
              IsVisible="{Binding ValidationMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
        <StackPanel Spacing="8">
          <TextBlock Text="éªŒè¯ç»“æžœ" FontWeight="SemiBold"/>
          <TextBox Text="{Binding ValidationMessage}" 
                  IsReadOnly="True" 
                  Background="Transparent"
                  BorderThickness="0"
                  TextWrapping="Wrap"/>
        </StackPanel>
      </Border>

      <!-- JWTå·¥å…·åŒºåŸŸ -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="16">
        <StackPanel Spacing="12">
          <TextBlock Text="JWTå·¥å…·" FontWeight="SemiBold" FontSize="16"/>
          
          <WrapPanel Orientation="Horizontal" ItemWidth="180" ItemHeight="40">
            <Button Content="ç”Ÿæˆæµ‹è¯•ä»¤ç‰Œ" Command="{Binding UseExampleCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="æ£€æŸ¥è¿‡æœŸæ—¶é—´" Command="{Binding UpdateTimestampsCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="åˆ·æ–°ä»¤ç‰Œ" Command="{Binding EncodeJwtCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="ä»¤ç‰Œä¿¡æ¯" Command="{Binding DecodeJwtCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="æ‰¹é‡éªŒè¯" Command="{Binding VerifyJwtCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="å¯¼å‡ºå¯†é’¥" Command="{Binding ClearCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
          </WrapPanel>
        </StackPanel>
      </Border>

      <!-- ä½¿ç”¨è¯´æ˜Ž -->
      <Expander Header="ä½¿ç”¨è¯´æ˜Ž" IsExpanded="False">
        <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
                CornerRadius="8" 
                Padding="16">
          <StackPanel Spacing="8">
            <TextBlock Text="JWTç”Ÿæˆï¼š" FontWeight="SemiBold"/>
            <TextBlock Text="â€¢ åœ¨Headerä¸­é…ç½®ç®—æ³•å’Œä»¤ç‰Œç±»åž‹" TextWrapping="Wrap"/>
            <TextBlock Text="â€¢ åœ¨Payloadä¸­æ·»åŠ å£°æ˜Žä¿¡æ¯ï¼ˆç”¨æˆ·IDã€è¿‡æœŸæ—¶é—´ç­‰ï¼‰" TextWrapping="Wrap"/>
            <TextBlock Text="â€¢ è®¾ç½®å®‰å…¨çš„å¯†é’¥ç”¨äºŽç­¾å" TextWrapping="Wrap"/>
            
            <TextBlock Text="JWTéªŒè¯ï¼š" FontWeight="SemiBold" Margin="0,12,0,0"/>
            <TextBlock Text="â€¢ ç²˜è´´JWTä»¤ç‰Œè¿›è¡Œè§£ç " TextWrapping="Wrap"/>
            <TextBlock Text="â€¢ éªŒè¯ä»¤ç‰Œç­¾åçš„æœ‰æ•ˆæ€§" TextWrapping="Wrap"/>
            <TextBlock Text="â€¢ æ£€æŸ¥ä»¤ç‰Œæ˜¯å¦è¿‡æœŸ" TextWrapping="Wrap"/>
            
            <TextBlock Text="å®‰å…¨æç¤ºï¼š" FontWeight="SemiBold" Margin="0,12,0,0"/>
            <TextBlock Text="â€¢ ä½¿ç”¨è¶³å¤Ÿé•¿åº¦çš„éšæœºå¯†é’¥" TextWrapping="Wrap"/>
            <TextBlock Text="â€¢ è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´" TextWrapping="Wrap"/>
            <TextBlock Text="â€¢ ä¸è¦åœ¨JWTä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯" TextWrapping="Wrap"/>
          </StackPanel>
        </Border>
      </Expander>

    </StackPanel>
  </ScrollViewer>
</UserControl>
