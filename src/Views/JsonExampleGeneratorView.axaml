<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:DevUtilities.ViewModels"
             x:Class="DevUtilities.Views.JsonExampleGeneratorView"
             x:DataType="vm:JsonExampleGeneratorViewModel">

  <Design.DataContext>
    <vm:JsonExampleGeneratorViewModel/>
  </Design.DataContext>

  <ScrollViewer>
    <StackPanel Margin="20" Spacing="20">
      
      <!-- 标题区域 -->
      <StackPanel Spacing="6">
        <TextBlock Text="JSON示例生成器" 
                   FontSize="26" 
                   FontWeight="Bold" 
                   Foreground="{DynamicResource SystemAccentColor}"/>
        <TextBlock Text="支持类定义与JSON之间的双向转换" 
                   FontSize="14" 
                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
      </StackPanel>

      <!-- 模式切换区域 -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="16">
        <StackPanel Spacing="12">
          <TextBlock Text="转换模式" FontWeight="SemiBold" FontSize="16"/>
          <StackPanel Orientation="Horizontal" Spacing="20">
            <RadioButton Content="类定义 → JSON" 
                        IsChecked="{Binding IsClassToJsonMode}" 
                        GroupName="ConversionMode"/>
            <RadioButton Content="JSON → 类定义" 
                        IsChecked="{Binding !IsClassToJsonMode}" 
                        GroupName="ConversionMode"/>
          </StackPanel>
        </StackPanel>
      </Border>

      <!-- 配置选项区域 -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="16">
        <StackPanel Spacing="12">
          <TextBlock Text="生成选项" FontWeight="SemiBold" FontSize="16"/>
          
          <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto">
            <!-- 语言选择 -->
            <StackPanel Grid.Column="0" Grid.Row="0" Spacing="6" Margin="0,0,10,0">
              <TextBlock Text="目标语言"/>
              <ComboBox ItemsSource="{Binding SupportedLanguages}" 
                       SelectedItem="{Binding SelectedLanguage}" 
                       HorizontalAlignment="Stretch"/>
            </StackPanel>
            
            <!-- 选项复选框 -->
            <StackPanel Grid.Column="1" Grid.Row="0" Spacing="8" Margin="10,0,0,0">
              <CheckBox Content="包含空值" IsChecked="{Binding IncludeNullValues}"/>
              <CheckBox Content="使用随机值" IsChecked="{Binding UseRandomValues}"/>
              <CheckBox Content="格式化输出" IsChecked="{Binding PrettyFormat}"/>
            </StackPanel>
          </Grid>
        </StackPanel>
      </Border>

      <!-- 输入输出区域 -->
      <Grid ColumnDefinitions="*,20,*" RowDefinitions="Auto,*">
        
        <!-- 输入区域 -->
        <StackPanel Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Spacing="8">
          <TextBlock Text="{Binding InputAreaTitle}" FontWeight="SemiBold" FontSize="16"/>
          <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
                  CornerRadius="8" 
                  Padding="12"
                  Height="400">
            <Grid RowDefinitions="*,Auto">
              <TextBox Grid.Row="0"
                      Text="{Binding InputText}" 
                      AcceptsReturn="True" 
                      TextWrapping="Wrap"
                      FontFamily="Consolas"
                      FontSize="13"
                      Background="Transparent"
                      BorderThickness="0"
                      Watermark="{Binding InputPlaceholder}"/>
              
              <!-- 输入区域按钮 -->
              <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
                <Button Content="粘贴" Command="{Binding CopyCommand}" Classes="accent"/>
                <Button Content="清空" Command="{Binding ClearCommand}"/>
                <Button Content="从文件加载" Command="{Binding FormatCommand}"/>
                <Button Content="示例" Command="{Binding ValidateCommand}"/>
              </StackPanel>
            </Grid>
          </Border>
        </StackPanel>

        <!-- 分隔符 -->
        <Border Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" 
                Background="{DynamicResource SystemControlForegroundBaseLowBrush}" 
                Width="1" 
                Margin="0,30,0,0"/>

        <!-- 输出区域 -->
        <StackPanel Grid.Column="2" Grid.Row="0" Grid.RowSpan="2" Spacing="8">
          <TextBlock Text="{Binding OutputAreaTitle}" FontWeight="SemiBold" FontSize="16"/>
          <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
                  CornerRadius="8" 
                  Padding="12"
                  Height="400">
            <Grid RowDefinitions="*,Auto">
              <TextBox Grid.Row="0"
                      Text="{Binding OutputText}" 
                      AcceptsReturn="True" 
                      TextWrapping="Wrap"
                      FontFamily="Consolas"
                      FontSize="13"
                      Background="Transparent"
                      BorderThickness="0"
                      IsReadOnly="True"
                      Watermark="转换结果将显示在这里..."/>
              
              <!-- 输出区域按钮 -->
              <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
                <Button Content="复制" Command="{Binding CopyCommand}" Classes="accent"/>
                <Button Content="保存" Command="{Binding FormatCommand}"/>
                <Button Content="格式化" Command="{Binding FormatCommand}"/>
                <Button Content="验证" Command="{Binding ValidateCommand}"/>
              </StackPanel>
            </Grid>
          </Border>
        </StackPanel>
      </Grid>

      <!-- 转换按钮 -->
      <Button Content="{Binding ConvertButtonText}" 
              Command="{Binding FormatCommand}" 
              HorizontalAlignment="Center"
              Classes="accent"
              FontSize="16"
              Padding="24,12"
              ToolTip.Tip="{Binding ConvertButtonTooltip}"/>

      <!-- 快速操作区域 -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="16">
        <StackPanel Spacing="12">
          <TextBlock Text="快速操作" FontWeight="SemiBold" FontSize="16"/>
          
          <WrapPanel Orientation="Horizontal" ItemWidth="200" ItemHeight="40">
            <Button Content="生成简单对象" Command="{Binding FormatCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="生成数组对象" Command="{Binding ValidateCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="生成嵌套对象" Command="{Binding CopyCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="生成复杂对象" Command="{Binding ClearCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="压缩JSON" Command="{Binding FormatCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
            <Button Content="美化JSON" Command="{Binding ValidateCommand}" 
                   HorizontalAlignment="Stretch" Margin="4"/>
          </WrapPanel>
        </StackPanel>
      </Border>

      <!-- 类型映射区域 -->
      <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
              CornerRadius="8" 
              Padding="16">
        <StackPanel Spacing="12">
          <TextBlock Text="类型映射参考" FontWeight="SemiBold" FontSize="16"/>
          
          <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto">
            <TextBlock Grid.Column="0" Grid.Row="0" Text="C# → JSON" FontWeight="SemiBold" Margin="0,0,0,8"/>
            <TextBlock Grid.Column="1" Grid.Row="0" Text="Java → JSON" FontWeight="SemiBold" Margin="0,0,0,8"/>
            
            <TextBlock Grid.Column="0" Grid.Row="1" Text="string → string" FontFamily="Consolas"/>
            <TextBlock Grid.Column="1" Grid.Row="1" Text="String → string" FontFamily="Consolas"/>
            
            <TextBlock Grid.Column="0" Grid.Row="2" Text="int/long → number" FontFamily="Consolas"/>
            <TextBlock Grid.Column="1" Grid.Row="2" Text="int/long → number" FontFamily="Consolas"/>
            
            <TextBlock Grid.Column="0" Grid.Row="3" Text="bool → boolean" FontFamily="Consolas"/>
            <TextBlock Grid.Column="1" Grid.Row="3" Text="boolean → boolean" FontFamily="Consolas"/>
            
            <TextBlock Grid.Column="0" Grid.Row="4" Text="List&lt;T&gt; → array" FontFamily="Consolas"/>
            <TextBlock Grid.Column="1" Grid.Row="4" Text="List&lt;T&gt; → array" FontFamily="Consolas"/>
          </Grid>
        </StackPanel>
      </Border>

      <!-- 错误信息显示 -->
      <Border Background="{DynamicResource SystemFillColorCriticalBrush}" 
              CornerRadius="8" 
              Padding="12"
              IsVisible="{Binding HasError}">
        <StackPanel Spacing="8">
          <TextBlock Text="错误信息" FontWeight="SemiBold" Foreground="White"/>
          <TextBox Text="{Binding ErrorMessage}" 
                  IsReadOnly="True" 
                  Background="Transparent"
                  BorderThickness="0"
                  Foreground="White"
                  TextWrapping="Wrap"/>
        </StackPanel>
      </Border>

      <!-- 使用说明 -->
      <Expander Header="使用说明" IsExpanded="False">
        <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
                CornerRadius="8" 
                Padding="16">
          <StackPanel Spacing="8">
            <TextBlock Text="类定义 → JSON 模式：" FontWeight="SemiBold"/>
            <TextBlock Text="• 输入C#或Java类定义代码" TextWrapping="Wrap"/>
            <TextBlock Text="• 支持基本数据类型、集合类型和自定义类型" TextWrapping="Wrap"/>
            <TextBlock Text="• 可选择是否包含空值和使用随机值" TextWrapping="Wrap"/>
            
            <TextBlock Text="JSON → 类定义 模式：" FontWeight="SemiBold" Margin="0,12,0,0"/>
            <TextBlock Text="• 输入有效的JSON数据" TextWrapping="Wrap"/>
            <TextBlock Text="• 自动分析JSON结构生成对应的类定义" TextWrapping="Wrap"/>
            <TextBlock Text="• 支持嵌套对象和数组类型" TextWrapping="Wrap"/>
            
            <TextBlock Text="快捷键：" FontWeight="SemiBold" Margin="0,12,0,0"/>
            <TextBlock Text="• Ctrl+F: 执行转换" TextWrapping="Wrap"/>
            <TextBlock Text="• Ctrl+V: 粘贴内容" TextWrapping="Wrap"/>
            <TextBlock Text="• Ctrl+C: 复制结果" TextWrapping="Wrap"/>
          </StackPanel>
        </Border>
      </Expander>

    </StackPanel>
  </ScrollViewer>
</UserControl>
