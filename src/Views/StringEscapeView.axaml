<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:DevUtilities.ViewModels"
             xmlns:converters="using:DevUtilities.Converters"
             x:Class="DevUtilities.Views.StringEscapeView"
             x:DataType="vm:StringEscapeViewModel">

  <Grid RowDefinitions="Auto,*,Auto,*,Auto" Margin="20">
    
    <!-- 标题和控制区域 -->
    <StackPanel Grid.Row="0" Orientation="Vertical" Spacing="15" Margin="0,0,0,20">
      <TextBlock Text="字符串转义/反转义工具" 
                 FontSize="24" 
                 FontWeight="Bold" 
                 HorizontalAlignment="Center"/>
      
      <!-- 转义类型选择和模式切换 -->
      <Grid ColumnDefinitions="*,Auto,Auto">
        <ComboBox Grid.Column="0" 
                  ItemsSource="{Binding EscapeTypes}"
                  SelectedItem="{Binding SelectedEscapeType}"
                  HorizontalAlignment="Stretch"
                  Margin="0,0,10,0"/>
        
        <ToggleButton Grid.Column="1" 
                      IsChecked="{Binding IsEscapeMode}"
                      Content="{Binding IsEscapeMode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='转义|反转义'}"
                      Margin="0,0,10,0"
                      Padding="15,5"/>
        
        <Button Grid.Column="2" 
                Content="交换输入输出"
                Command="{Binding SwapInputOutputCommand}"
                Padding="15,5"/>
      </Grid>
      
      <!-- 快速示例按钮 -->
      <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Center">
        <Button Content="JSON示例" 
                Command="{Binding UseExampleCommand}" 
                CommandParameter="Hello &quot;World&quot;&#10;New Line&#9;Tab"
                Classes="accent"/>
        <Button Content="HTML示例" 
                Command="{Binding UseExampleCommand}" 
                CommandParameter="&lt;div class=&quot;test&quot;&gt;Hello &amp; Welcome&lt;/div&gt;"/>
        <Button Content="URL示例" 
                Command="{Binding UseExampleCommand}" 
                CommandParameter="https://example.com/search?q=hello world&amp;type=text"/>
        <Button Content="Unicode示例" 
                Command="{Binding UseExampleCommand}" 
                CommandParameter="你好世界 Hello 🌍"/>
      </StackPanel>
    </StackPanel>

    <!-- 输入区域 -->
    <Border Grid.Row="1" 
            BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
            BorderThickness="1" 
            CornerRadius="5"
            Padding="10">
      <Grid RowDefinitions="Auto,*">
        <TextBlock Grid.Row="0" 
                   Text="输入文本:" 
                   FontWeight="SemiBold" 
                   Margin="0,0,0,5"/>
        <TextBox Grid.Row="1" 
                 Text="{Binding InputText}"
                 AcceptsReturn="True"
                 TextWrapping="Wrap"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 MinHeight="150"
                 FontFamily="Consolas,Monaco,monospace"/>
      </Grid>
    </Border>

    <!-- 分隔符和操作按钮 -->
    <StackPanel Grid.Row="2" 
                Orientation="Horizontal" 
                HorizontalAlignment="Center" 
                Spacing="15" 
                Margin="0,15">
      <Button Content="处理字符串" 
              Command="{Binding ProcessStringCommand}"
              Classes="accent"
              Padding="20,8"/>
      <Button Content="清空所有" 
              Command="{Binding ClearAllCommand}"
              Padding="20,8"/>
    </StackPanel>

    <!-- 输出区域 -->
    <Border Grid.Row="3" 
            BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
            BorderThickness="1" 
            CornerRadius="5"
            Padding="10">
      <Grid RowDefinitions="Auto,*">
        <TextBlock Grid.Row="0" 
                   Text="输出结果:" 
                   FontWeight="SemiBold" 
                   Margin="0,0,0,5"/>
        <TextBox Grid.Row="1" 
                 Text="{Binding OutputText}"
                 AcceptsReturn="True"
                 TextWrapping="Wrap"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 MinHeight="150"
                 IsReadOnly="True"
                 FontFamily="Consolas,Monaco,monospace"
                 Background="{DynamicResource SystemControlBackgroundAltHighBrush}"/>
      </Grid>
    </Border>

    <!-- 帮助信息 -->
    <Expander Grid.Row="4" 
              Header="转义类型说明" 
              Margin="0,15,0,0">
      <ScrollViewer MaxHeight="200">
        <StackPanel Spacing="10" Margin="10">
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">JSON转义:</Run> 用于JSON字符串中的特殊字符转义
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">JavaScript转义:</Run> 用于JavaScript字符串字面量
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">C#字符串转义:</Run> 用于C#字符串字面量中的特殊字符
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">Java字符串转义:</Run> 用于Java字符串字面量
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">Python字符串转义:</Run> 用于Python字符串字面量
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">XML/HTML转义:</Run> 用于XML和HTML文档中的特殊字符
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">URL转义:</Run> 用于URL中的特殊字符编码
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">SQL转义:</Run> 用于SQL查询中的单引号转义
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">正则表达式转义:</Run> 转义正则表达式中的特殊字符
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">CSV转义:</Run> 用于CSV文件中包含逗号、引号的字段
          </TextBlock>
          <TextBlock TextWrapping="Wrap">
            <Run FontWeight="Bold">Unicode转义:</Run> 将非ASCII字符转换为Unicode转义序列
          </TextBlock>
        </StackPanel>
      </ScrollViewer>
    </Expander>
  </Grid>
</UserControl>