<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:DevUtilities.ViewModels"
        mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="500"
        x:Class="DevUtilities.Views.SettingsDialog"
        x:DataType="vm:SettingsDialogViewModel"
        Title="设置"
        Width="600" Height="500"
        MinWidth="500" MinHeight="400"
        WindowStartupLocation="CenterOwner"
        CanResize="True">
  
  <Design.DataContext>
    <vm:SettingsDialogViewModel/>
  </Design.DataContext>

  <Grid RowDefinitions="*,Auto">
    
    <!-- 主内容区域 -->
    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
      <StackPanel Margin="20" Spacing="20">
        
        <!-- 格式化选项 -->
        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
          <StackPanel Spacing="12">
            <SelectableTextBlock Text="格式化选项" FontSize="18" FontWeight="SemiBold" />
            
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto" Margin="0,8,0,0">
              <StackPanel Grid.Column="0" Grid.Row="0" Spacing="4" Margin="0,0,8,0">
                <SelectableTextBlock Text="缩进大小:" FontWeight="Medium" />
                <NumericUpDown Value="{Binding IndentSize}" 
                             Minimum="1" Maximum="8" 
                             Increment="1" />
              </StackPanel>
              
              <CheckBox Grid.Column="1" Grid.Row="0" 
                       IsChecked="{Binding UseTabsForIndent}"
                       Content="使用制表符缩进"
                       VerticalAlignment="Bottom" />
              
              <CheckBox Grid.Column="0" Grid.Row="1" 
                       IsChecked="{Binding AutoFormat}"
                       Content="自动格式化"
                       Margin="0,8,0,0" />
              
              <CheckBox Grid.Column="1" Grid.Row="1" 
                       IsChecked="{Binding CompactOutput}"
                       Content="压缩输出"
                       Margin="0,8,0,0" />
            </Grid>
          </StackPanel>
        </Border>
        
        <!-- 性能设置 -->
        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
          <StackPanel Spacing="12">
            <SelectableTextBlock Text="性能设置" FontSize="18" FontWeight="SemiBold" />
            
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto" ColumnSpacing="16" RowSpacing="12">
              
              <StackPanel Grid.Column="0" Grid.Row="0" Spacing="4">
                <SelectableTextBlock Text="最大文件大小 (MB):" FontWeight="Medium" />
                <NumericUpDown Value="{Binding MaxFileSize}" 
                             Minimum="1" Maximum="1000" 
                             Increment="1" />
              </StackPanel>
              
              <StackPanel Grid.Column="1" Grid.Row="0" Spacing="4">
                <SelectableTextBlock Text="最大处理时间 (秒):" FontWeight="Medium" />
                <NumericUpDown Value="{Binding MaxProcessingTime}" 
                             Minimum="5" Maximum="300" 
                             Increment="5" />
              </StackPanel>
              
              <CheckBox Grid.Column="0" Grid.Row="1" 
                       IsChecked="{Binding EnableMemoryMonitoring}"
                       Content="启用内存监控"
                       Margin="0,8,0,0" />
              
              <StackPanel Grid.Column="1" Grid.Row="1" Spacing="4" Margin="0,8,0,0">
                <SelectableTextBlock Text="内存阈值 (MB):" FontWeight="Medium" />
                <NumericUpDown Value="{Binding MemoryThreshold}" 
                             Minimum="50" Maximum="2000" 
                             Increment="10" />
              </StackPanel>
            </Grid>
          </StackPanel>
        </Border>
        
        <!-- 日志设置 -->
        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
          <StackPanel Spacing="12">
            <SelectableTextBlock Text="日志设置" FontSize="18" FontWeight="SemiBold" />
            
            <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto" ColumnSpacing="16" RowSpacing="12">
              
              <StackPanel Grid.Column="0" Grid.Row="0" Spacing="4">
                <SelectableTextBlock Text="日志级别:" FontWeight="Medium" />
                <ComboBox ItemsSource="{Binding AvailableLogLevels}" 
                         SelectedItem="{Binding LogLevel}"
                         MinWidth="150" />
              </StackPanel>
              
              <CheckBox Grid.Column="0" Grid.Row="1" 
                       IsChecked="{Binding EnableFileLogging}"
                       Content="启用文件日志"
                       Margin="0,8,0,0" />
              
              <CheckBox Grid.Column="1" Grid.Row="1" 
                       IsChecked="{Binding EnableConsoleLogging}"
                       Content="启用控制台日志"
                       Margin="0,8,0,0" />
            </Grid>
          </StackPanel>
        </Border>

        <!-- 设置管理 -->
        <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
          <StackPanel Spacing="12">
            <SelectableTextBlock Text="设置管理" FontSize="18" FontWeight="SemiBold" />
            
            <StackPanel Orientation="Horizontal" Spacing="12">
              <Button Content="重置为默认值" Command="{Binding ResetToDefaultCommand}" 
                     Background="#DC3545" Foreground="White" Padding="12,6"/>
              <Button Content="导出设置" Command="{Binding ExportSettingsCommand}" 
                     Background="#28A745" Foreground="White" Padding="12,6"/>
              <Button Content="导入设置" Command="{Binding ImportSettingsCommand}" 
                     Background="#17A2B8" Foreground="White" Padding="12,6"/>
            </StackPanel>
          </StackPanel>
        </Border>
        
      </StackPanel>
    </ScrollViewer>
    
    <!-- 底部按钮区域 -->
    <Border Grid.Row="1" Background="#F8F9FA" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0" Padding="20,16">
      <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
        <Button Content="确定" Command="{Binding OkCommand}" 
               Background="#007ACC" Foreground="White" Padding="20,8" MinWidth="80"/>
        <Button Content="取消" Command="{Binding CancelCommand}" 
               Background="#6C757D" Foreground="White" Padding="20,8" MinWidth="80"/>
      </StackPanel>
    </Border>
    
  </Grid>
</Window>

