<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:DevUtilities.ViewModels"
             xmlns:converters="using:DevUtilities.Converters"
             xmlns:i="using:Avalonia.Xaml.Interactivity"
             xmlns:ia="using:Avalonia.Xaml.Interactions.Core"
             mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="700"
             x:Class="DevUtilities.Views.Base64EncoderView"
             x:DataType="vm:Base64EncoderViewModel">

  <ScrollViewer VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
    <Grid Margin="20" RowDefinitions="Auto,*,Auto" ColumnDefinitions="*">
      
      <!-- Header Section -->
      <Border Grid.Row="0" Background="White" CornerRadius="12" Padding="20" 
              BorderBrush="#E0E0E0" BorderThickness="1" Margin="0,0,0,16">
        <Border.Effect>
          <DropShadowEffect BlurRadius="8" OffsetX="0" OffsetY="2" Color="#10000000"/>
        </Border.Effect>
        
        <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*">
          
          <!-- Title and Mode Selection -->
          <Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto">
            <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="12">
              <SelectableTextBlock Text="🔄" FontSize="20" VerticalAlignment="Center"/>
              <SelectableTextBlock Text="Base64 编码工具" FontSize="18" FontWeight="SemiBold" VerticalAlignment="Center"/>
            </StackPanel>
            
            <!-- Input Type Selection -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="16" HorizontalAlignment="Center">
              <Border Background="#F8F9FA" CornerRadius="8" Padding="4">
                <StackPanel Orientation="Horizontal" Spacing="4">
                  <RadioButton Content="📝 文本模式" IsChecked="{Binding !IsImageMode}" GroupName="InputType" 
                               Padding="12,8" FontWeight="Medium"/>
                  <RadioButton Content="🖼️ 图片模式" IsChecked="{Binding IsImageMode}" GroupName="InputType" 
                               Padding="12,8" FontWeight="Medium"/>
                </StackPanel>
              </Border>
            </StackPanel>
            
            <!-- Quick Actions -->
            <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
              <Button Classes="secondary-button" Command="{Binding SwapInputOutputCommand}"
                      IsVisible="{Binding !IsImageMode}" ToolTip.Tip="交换输入输出内容">
                <StackPanel Orientation="Horizontal" Spacing="6">
                  <SelectableTextBlock Text="⇄" FontSize="14"/>
                  <SelectableTextBlock Text="交换"/>
                </StackPanel>
              </Button>
              <Button Classes="secondary-button" Command="{Binding ClearCommand}" ToolTip.Tip="清空所有内容">
                <StackPanel Orientation="Horizontal" Spacing="6">
                  <SelectableTextBlock Text="🗑️" FontSize="12"/>
                  <SelectableTextBlock Text="清空"/>
                </StackPanel>
              </Button>
            </StackPanel>
          </Grid>
          
          <!-- Text Mode Settings -->
          <Border Grid.Row="1" Background="#F8F9FA" CornerRadius="8" Padding="16" Margin="0,16,0,0"
                  IsVisible="{Binding !IsImageMode}">
            <Grid ColumnDefinitions="Auto,*,Auto">
              <!-- Operation Mode -->
              <Border Grid.Column="0" Background="White" CornerRadius="6" Padding="4">
                <StackPanel Orientation="Horizontal" Spacing="4">
                  <RadioButton Content="🔒 编码" IsChecked="{Binding IsEncodeMode}" GroupName="Mode" 
                               Padding="12,6" FontWeight="Medium"/>
                  <RadioButton Content="🔓 解码" IsChecked="{Binding !IsEncodeMode}" GroupName="Mode" 
                               Padding="12,6" FontWeight="Medium"/>
                </StackPanel>
              </Border>
              
              <!-- Encoding Selection -->
              <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                <SelectableTextBlock Text="字符编码:" VerticalAlignment="Center" FontWeight="Medium"/>
                <ComboBox ItemsSource="{Binding AvailableEncodings}" 
                          SelectedItem="{Binding SelectedEncoding}"
                          Width="100" Padding="8,6"/>
              </StackPanel>
            </Grid>
          </Border>
          
          <!-- Image Mode Settings -->
          <Border Grid.Row="1" Background="#F8F9FA" CornerRadius="8" Padding="16" Margin="0,16,0,0"
                  IsVisible="{Binding IsImageMode}">
            <StackPanel Spacing="12">
              <!-- Image Mode Selection -->
              <Border Background="White" CornerRadius="6" Padding="4" HorizontalAlignment="Left">
                <StackPanel Orientation="Horizontal" Spacing="4">
                  <RadioButton Content="🖼️ → 📝 图片转Base64" IsChecked="{Binding IsImageToBase64Mode}" GroupName="ImageMode" 
                               Padding="12,6" FontWeight="Medium"/>
                  <RadioButton Content="📝 → 🖼️ Base64转图片" IsChecked="{Binding !IsImageToBase64Mode}" GroupName="ImageMode" 
                               Padding="12,6" FontWeight="Medium"/>
                </StackPanel>
              </Border>
              
              <!-- Image to Base64 Controls -->
              <Grid IsVisible="{Binding IsImageToBase64Mode}" ColumnDefinitions="Auto,*,Auto">
                <Button Grid.Column="0" Classes="primary-button" Command="{Binding SelectImageForBase64Command}">
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <SelectableTextBlock Text="📁" FontSize="14"/>
                    <SelectableTextBlock Text="选择图片"/>
                  </StackPanel>
                </Button>
                <SelectableTextBlock Grid.Column="1" Text="{Binding SelectedImagePath}" VerticalAlignment="Center" 
                           Margin="12,0" TextTrimming="CharacterEllipsis" FontStyle="Italic"/>
                <Button Grid.Column="2" Classes="secondary-button" Command="{Binding ClearImageCommand}"
                        IsVisible="{Binding SelectedImagePath, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                  <StackPanel Orientation="Horizontal" Spacing="4">
                    <SelectableTextBlock Text="✖️" FontSize="10"/>
                    <SelectableTextBlock Text="清除"/>
                  </StackPanel>
                </Button>
              </Grid>
              
              <!-- Base64 to Image Controls -->
              <StackPanel IsVisible="{Binding !IsImageToBase64Mode}" Spacing="8">
                <SelectableTextBlock Text="Base64 输入:" FontWeight="SemiBold"/>
                <TextBox Text="{Binding Base64Input}" 
                         AcceptsReturn="True" 
                         TextWrapping="Wrap"
                         MinHeight="80"
                         MaxHeight="120"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         Watermark="请粘贴Base64编码的图片数据..."
                         CornerRadius="6"/>
                <Button Classes="primary-button" Command="{Binding SaveImageFromBase64Command}"
                        IsVisible="{Binding ImagePreview, Converter={x:Static ObjectConverters.IsNotNull}}"
                        HorizontalAlignment="Left">
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <SelectableTextBlock Text="💾" FontSize="14"/>
                    <SelectableTextBlock Text="保存图片"/>
                  </StackPanel>
                </Button>
              </StackPanel>
            </StackPanel>
          </Border>
        </Grid>
      </Border>

      <!-- Main Content Area -->
      <Grid Grid.Row="1" ColumnDefinitions="*" RowDefinitions="*">
        
        <!-- Text Mode Content -->
        <Grid IsVisible="{Binding !IsImageMode}" ColumnDefinitions="*,12,*">
          
          <!-- Input Panel -->
          <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" 
                  BorderBrush="#E0E0E0" BorderThickness="1">
            <Border.Effect>
              <DropShadowEffect BlurRadius="6" OffsetX="0" OffsetY="2" Color="#08000000"/>
            </Border.Effect>
            
            <Grid RowDefinitions="Auto,*,Auto">
              <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8" Margin="0,0,0,12">
                <SelectableTextBlock Text="📝" FontSize="16"/>
                <SelectableTextBlock Text="{Binding IsEncodeMode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='原始文本|Base64数据'}" 
                           FontSize="16" FontWeight="SemiBold"/>
                <Border Background="#E3F2FD" CornerRadius="12" Padding="6,2" Margin="8,0,0,0">
                  <SelectableTextBlock Text="{Binding InputText.Length, StringFormat='{}{0} 字符'}" 
                             FontSize="11" Foreground="#1976D2"/>
                </Border>
              </StackPanel>
              
              <Border Grid.Row="1" Background="#FAFAFA" CornerRadius="8" BorderBrush="#E0E0E0" BorderThickness="1">
                <TextBox Text="{Binding InputText}" 
                         AcceptsReturn="True" 
                         TextWrapping="Wrap"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         MinHeight="280"
                         Background="Transparent"
                         BorderThickness="0"
                         Padding="12"
                         FontFamily="Consolas,Monaco,monospace"
                         FontSize="13"
                         Watermark="请输入要转换的内容..."/>
              </Border>
              
              <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8" Margin="0,12,0,0">
                <Button Classes="primary-button" Command="{Binding ProcessCommand}" 
                        IsEnabled="{Binding InputText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <SelectableTextBlock Text="{Binding IsEncodeMode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='🔒|🔓'}" FontSize="14"/>
                    <SelectableTextBlock Text="{Binding IsEncodeMode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='编码|解码'}"/>
                  </StackPanel>
                </Button>
                <Button Classes="secondary-button" Command="{Binding ClearInputCommand}">
                  <StackPanel Orientation="Horizontal" Spacing="4">
                    <SelectableTextBlock Text="🗑️" FontSize="12"/>
                    <SelectableTextBlock Text="清空"/>
                  </StackPanel>
                </Button>
              </StackPanel>
            </Grid>
          </Border>
          
          <!-- Output Panel -->
          <Border Grid.Column="2" Background="White" CornerRadius="12" Padding="20" 
                  BorderBrush="#E0E0E0" BorderThickness="1">
            <Border.Effect>
              <DropShadowEffect BlurRadius="6" OffsetX="0" OffsetY="2" Color="#08000000"/>
            </Border.Effect>
            
            <Grid RowDefinitions="Auto,*,Auto">
              <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8" Margin="0,0,0,12">
                <SelectableTextBlock Text="📋" FontSize="16"/>
                <SelectableTextBlock Text="{Binding IsEncodeMode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='Base64编码|解码结果'}" 
                           FontSize="16" FontWeight="SemiBold"/>
                <Border Background="#E8F5E8" CornerRadius="12" Padding="6,2" Margin="8,0,0,0"
                        IsVisible="{Binding OutputText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                  <SelectableTextBlock Text="{Binding OutputText.Length, StringFormat='{}{0} 字符'}" 
                             FontSize="11" Foreground="#2E7D32"/>
                </Border>
              </StackPanel>
              
              <Border Grid.Row="1" Background="#FAFAFA" CornerRadius="8" BorderBrush="#E0E0E0" BorderThickness="1">
                <TextBox Text="{Binding OutputText}" 
                         IsReadOnly="True"
                         AcceptsReturn="True" 
                         TextWrapping="Wrap"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         MinHeight="280"
                         Background="Transparent"
                         BorderThickness="0"
                         Padding="12"
                         FontFamily="Consolas,Monaco,monospace"
                         FontSize="13"
                         Watermark="转换结果将在此显示..."/>
              </Border>
              
              <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8" Margin="0,12,0,0"
                          IsVisible="{Binding OutputText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                <Button Classes="primary-button" Command="{Binding CopyToClipboardCommand}" 
                        CommandParameter="{Binding OutputText}">
                  <StackPanel Orientation="Horizontal" Spacing="6">
                    <SelectableTextBlock Text="📋" FontSize="14"/>
                    <SelectableTextBlock Text="复制"/>
                  </StackPanel>
                </Button>
                <Button Classes="secondary-button" Command="{Binding ClearOutputCommand}">
                  <StackPanel Orientation="Horizontal" Spacing="4">
                    <SelectableTextBlock Text="🗑️" FontSize="12"/>
                    <SelectableTextBlock Text="清空"/>
                  </StackPanel>
                </Button>
              </StackPanel>
            </Grid>
          </Border>
        </Grid>
        
        <!-- Image Mode Content -->
        <Grid IsVisible="{Binding IsImageMode}" ColumnDefinitions="*,12,*">
          
          <!-- Image Preview Panel -->
          <Border Grid.Column="0" Background="White" CornerRadius="12" Padding="20" 
                  BorderBrush="#E0E0E0" BorderThickness="1">
            <Border.Effect>
              <DropShadowEffect BlurRadius="6" OffsetX="0" OffsetY="2" Color="#08000000"/>
            </Border.Effect>
            
            <Grid RowDefinitions="Auto,*">
              <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8" Margin="0,0,0,12">
                <SelectableTextBlock Text="🖼️" FontSize="16"/>
                <SelectableTextBlock Text="{Binding IsImageToBase64Mode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='图片预览|解码预览'}" 
                           FontSize="16" FontWeight="SemiBold"/>
                <Border Background="#FFF3E0" CornerRadius="12" Padding="6,2" Margin="8,0,0,0"
                        IsVisible="{Binding ImageInfo, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                  <SelectableTextBlock Text="{Binding ImageInfo}" FontSize="11" Foreground="#F57C00"/>
                </Border>
              </StackPanel>
              
              <!-- Image Display Area -->
              <Border Grid.Row="1" Background="#F8F9FA" BorderBrush="#E0E0E0" BorderThickness="2" 
                      CornerRadius="12" Padding="20" MinHeight="320"
                      DragDrop.AllowDrop="True">
                <Border.Styles>
                  <Style Selector="Border:dragover">
                    <Setter Property="Background" Value="#E3F2FD"/>
                    <Setter Property="BorderBrush" Value="#2196F3"/>
                    <Setter Property="BorderThickness" Value="3"/>
                  </Style>
                </Border.Styles>
                
                <Grid>
                  <!-- Image Display -->
                  <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"
                                IsVisible="{Binding ImagePreview, Converter={x:Static ObjectConverters.IsNotNull}}">
                    <Border Background="White" CornerRadius="8" Padding="8">
                      <Image Source="{Binding ImagePreview}" Stretch="Uniform" MaxWidth="500" MaxHeight="400"/>
                    </Border>
                  </ScrollViewer>
                  
                  <!-- Drop Zone -->
                  <Border Background="Transparent" CornerRadius="8" 
                          IsVisible="{Binding ImagePreview, Converter={x:Static ObjectConverters.IsNull}}">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="16">
                      <SelectableTextBlock Text="🖼️" FontSize="64" HorizontalAlignment="Center" Opacity="0.3"/>
                      <SelectableTextBlock Text="{Binding IsImageToBase64Mode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='拖拽图片到此处或点击选择|输入Base64数据后图片将在此显示'}" 
                                 FontSize="16" Foreground="#666" HorizontalAlignment="Center" TextAlignment="Center" 
                                 FontWeight="Medium"/>
                      <Button Classes="primary-button" Command="{Binding SelectImageForBase64Command}"
                              IsVisible="{Binding IsImageToBase64Mode}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                          <SelectableTextBlock Text="📁" FontSize="16"/>
                          <SelectableTextBlock Text="选择图片文件"/>
                        </StackPanel>
                      </Button>
                    </StackPanel>
                  </Border>
                </Grid>
              </Border>
            </Grid>
          </Border>
          
          <!-- Base64 Output Panel -->
          <Border Grid.Column="2" Background="White" CornerRadius="12" Padding="20" 
                  BorderBrush="#E0E0E0" BorderThickness="1">
            <Border.Effect>
              <DropShadowEffect BlurRadius="6" OffsetX="0" OffsetY="2" Color="#08000000"/>
            </Border.Effect>
            
            <Grid RowDefinitions="Auto,*,Auto">
              <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="8" Margin="0,0,0,12">
                <SelectableTextBlock Text="📝" FontSize="16"/>
                <SelectableTextBlock Text="{Binding IsImageToBase64Mode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='Base64编码|操作面板'}" 
                           FontSize="16" FontWeight="SemiBold"/>
                <Border Background="#E8F5E8" CornerRadius="12" Padding="6,2" Margin="8,0,0,0"
                        IsVisible="{Binding OutputText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                  <SelectableTextBlock Text="{Binding OutputText.Length, StringFormat='{}{0} 字符'}" 
                             FontSize="11" Foreground="#2E7D32"/>
                </Border>
              </StackPanel>
              
              <Border Grid.Row="1" Background="#FAFAFA" CornerRadius="8" BorderBrush="#E0E0E0" BorderThickness="1">
                <TextBox Text="{Binding OutputText}" 
                         IsReadOnly="{Binding IsImageToBase64Mode}"
                         AcceptsReturn="True" 
                         TextWrapping="Wrap"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         MinHeight="320"
                         Background="Transparent"
                         BorderThickness="0"
                         Padding="12"
                         FontFamily="Consolas,Monaco,monospace"
                         FontSize="12"
                         Watermark="{Binding IsImageToBase64Mode, Converter={x:Static converters:BooleanToStringConverter.Instance}, ConverterParameter='Base64编码结果将在此显示...|请粘贴Base64数据...'}"/>
              </Border>
              
              <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8" Margin="0,12,0,0">
                <!-- Image to Base64 Mode Buttons -->
                <StackPanel Orientation="Horizontal" Spacing="8" IsVisible="{Binding IsImageToBase64Mode}">
                  <Button Classes="primary-button" Command="{Binding CopyToClipboardCommand}" 
                          CommandParameter="{Binding OutputText}"
                          IsVisible="{Binding OutputText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                    <StackPanel Orientation="Horizontal" Spacing="6">
                      <SelectableTextBlock Text="📋" FontSize="14"/>
                      <SelectableTextBlock Text="复制Base64"/>
                    </StackPanel>
                  </Button>
                </StackPanel>
                
                <!-- Base64 to Image Mode Buttons -->
                <StackPanel Orientation="Horizontal" Spacing="8" IsVisible="{Binding !IsImageToBase64Mode}">
                  <Button Classes="primary-button" Command="{Binding ConvertBase64ToImageCommand}"
                          IsEnabled="{Binding OutputText, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                    <StackPanel Orientation="Horizontal" Spacing="6">
                      <SelectableTextBlock Text="🔄" FontSize="14"/>
                      <SelectableTextBlock Text="转换为图片"/>
                    </StackPanel>
                  </Button>
                  <Button Classes="secondary-button" Command="{Binding SaveImageFromBase64Command}"
                          IsVisible="{Binding ImagePreview, Converter={x:Static ObjectConverters.IsNotNull}}">
                    <StackPanel Orientation="Horizontal" Spacing="6">
                      <SelectableTextBlock Text="💾" FontSize="14"/>
                      <SelectableTextBlock Text="保存图片"/>
                    </StackPanel>
                  </Button>
                </StackPanel>
                
                <Button Classes="secondary-button" Command="{Binding ClearAllCommand}">
                  <StackPanel Orientation="Horizontal" Spacing="4">
                    <SelectableTextBlock Text="🗑️" FontSize="12"/>
                    <SelectableTextBlock Text="清空"/>
                  </StackPanel>
                </Button>
              </StackPanel>
            </Grid>
          </Border>
        </Grid>
      </Grid>

      <!-- Usage Instructions -->
      <Border Grid.Row="2" Background="#F8F9FA" CornerRadius="12" Padding="20" Margin="0,16,0,0"
              BorderBrush="#E0E0E0" BorderThickness="1">
        <Expander Header="使用说明" IsExpanded="False">
          <Expander.HeaderTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal" Spacing="8">
                <SelectableTextBlock Text="💡" FontSize="16"/>
                <SelectableTextBlock Text="{Binding}" FontSize="14" FontWeight="SemiBold"/>
              </StackPanel>
            </DataTemplate>
          </Expander.HeaderTemplate>
          
          <StackPanel Spacing="12" Margin="0,12,0,0">
            <SelectableTextBlock Text="文本模式：" FontWeight="SemiBold" FontSize="14"/>
            <StackPanel Spacing="6" Margin="16,0,0,0">
              <SelectableTextBlock Text="• 编码：输入原始文本，点击编码按钮生成Base64字符串" FontSize="13"/>
              <SelectableTextBlock Text="• 解码：输入Base64字符串，点击解码按钮还原原始文本" FontSize="13"/>
              <SelectableTextBlock Text="• 支持多种字符编码：UTF-8、ASCII、Unicode等" FontSize="13"/>
            </StackPanel>
            
            <SelectableTextBlock Text="图片模式：" FontWeight="SemiBold" FontSize="14" Margin="0,8,0,0"/>
            <StackPanel Spacing="6" Margin="16,0,0,0">
              <SelectableTextBlock Text="• 图片转Base64：拖拽图片文件或点击选择，自动生成Base64编码" FontSize="13"/>
              <SelectableTextBlock Text="• Base64转图片：粘贴Base64数据，点击转换预览图片并可保存" FontSize="13"/>
              <SelectableTextBlock Text="• 支持常见图片格式：PNG、JPG、GIF、BMP等" FontSize="13"/>
            </StackPanel>
            
            <Border Background="#E3F2FD" CornerRadius="8" Padding="12" Margin="0,8,0,0">
              <StackPanel Spacing="4">
                <SelectableTextBlock Text="💡 小贴士：" FontWeight="SemiBold" FontSize="13" Foreground="#1976D2"/>
                <SelectableTextBlock Text="• 使用等宽字体显示Base64数据，便于查看和复制" FontSize="12" Foreground="#1976D2"/>
                <SelectableTextBlock Text="• 支持拖拽操作，提升使用体验" FontSize="12" Foreground="#1976D2"/>
                <SelectableTextBlock Text="• 实时显示字符数量，方便数据管理" FontSize="12" Foreground="#1976D2"/>
              </StackPanel>
            </Border>
          </StackPanel>
        </Expander>
      </Border>
    </Grid>
  </ScrollViewer>

</UserControl>
