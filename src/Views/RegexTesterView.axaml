<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:DevUtilities.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="DevUtilities.Views.RegexTesterView"
             x:DataType="vm:RegexTesterViewModel">
  
  <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
    <StackPanel Margin="20" Spacing="20">
      
      <!-- 标题 -->
      <SelectableTextBlock Text="正则表达式测试器" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" />
      
      <!-- 正则表达式输入区域 -->
      <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="正则表达式" FontSize="18" FontWeight="SemiBold" />
          
          <!-- 正则表达式输入 -->
          <StackPanel Spacing="8">
            <SelectableTextBlock Text="正则表达式模式:" FontWeight="Medium" />
            <TextBox Text="{Binding Pattern}" 
                     Watermark="请输入正则表达式..."
                     FontFamily="Consolas,Monaco,monospace" />
          </StackPanel>
          
          <!-- 选项设置 -->
          <StackPanel Spacing="8">
            <SelectableTextBlock Text="匹配选项:" FontWeight="Medium" />
            <WrapPanel Orientation="Horizontal" Margin="0,4">
              <CheckBox Content="忽略大小写 (i)" IsChecked="{Binding IgnoreCase}" Margin="0,0,16,0" />
              <CheckBox Content="多行模式 (m)" IsChecked="{Binding Multiline}" Margin="0,0,16,0" />
              <CheckBox Content="单行模式 (s)" IsChecked="{Binding Singleline}" Margin="0,0,16,0" />
              <CheckBox Content="显式捕获 (n)" IsChecked="{Binding ExplicitCapture}" Margin="0,0,16,0" />
              <CheckBox Content="忽略空白 (x)" IsChecked="{Binding IgnoreWhitespace}" />
            </WrapPanel>
          </StackPanel>
          
          <!-- 操作按钮 -->
          <StackPanel Orientation="Horizontal" Spacing="8">
            <Button Content="测试匹配" Command="{Binding TestRegexCommand}" />
            <Button Content="清空" Command="{Binding ClearAllCommand}" />
          </StackPanel>
          
          <!-- 错误消息 -->
          <SelectableTextBlock Text="{Binding ErrorMessage}" 
                     Foreground="Red" 
                     IsVisible="{Binding HasError}" />
        </StackPanel>
      </Border>
      
      <!-- 测试文本区域 -->
      <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="测试文本" FontSize="18" FontWeight="SemiBold" />
          
          <StackPanel Spacing="8">
            <SelectableTextBlock Text="测试文本:" FontWeight="Medium" />
            <TextBox Text="{Binding TestText}" 
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     MinHeight="120"
                     FontFamily="Consolas,Monaco,monospace"
                     Watermark="请输入要测试的文本..." />
          </StackPanel>
          
          <StackPanel Orientation="Horizontal" Spacing="8">
          </StackPanel>
        </StackPanel>
      </Border>
      
      <!-- 匹配结果区域 -->
      <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="匹配结果" FontSize="18" FontWeight="SemiBold" />
          
          <!-- 匹配摘要 -->
          <SelectableTextBlock Text="{Binding MatchSummary}" FontWeight="Medium" />
          
          <!-- 匹配列表 -->
          <StackPanel Spacing="8">
            <SelectableTextBlock Text="匹配详情:" FontWeight="Medium" />
            <ListBox ItemsSource="{Binding Matches}" MinHeight="150" MaxHeight="300">
              <ListBox.ItemTemplate>
                <DataTemplate>
                  <StackPanel Spacing="4" Margin="8">
                    <SelectableTextBlock Text="{Binding Value}" FontFamily="Consolas,Monaco,monospace" FontWeight="Bold" />
                    <SelectableTextBlock Text="{Binding Index}" FontSize="12" Foreground="Gray" />
                  </StackPanel>
                </DataTemplate>
              </ListBox.ItemTemplate>
            </ListBox>
          </StackPanel>
          
          <StackPanel Orientation="Horizontal" Spacing="8">
          </StackPanel>
        </StackPanel>
      </Border>
      
      <!-- 替换功能区域 -->
      <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="替换功能" FontSize="18" FontWeight="SemiBold" />
          
          <StackPanel Spacing="8">
            <SelectableTextBlock Text="替换文本:" FontWeight="Medium" />
            <TextBox Text="{Binding ReplaceText}" 
                     Watermark="请输入替换文本..."
                     FontFamily="Consolas,Monaco,monospace" />
          </StackPanel>
          
          <StackPanel Orientation="Horizontal" Spacing="8">
            <Button Content="执行替换" Command="{Binding ReplaceTextContentCommand}" />
          </StackPanel>
          
          <StackPanel Spacing="8">
            <SelectableTextBlock Text="替换结果:" FontWeight="Medium" />
            <TextBox Text="{Binding ReplaceResult}" 
                     IsReadOnly="True"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     MinHeight="80"
                     FontFamily="Consolas,Monaco,monospace" />
          </StackPanel>
          
          <StackPanel Orientation="Horizontal" Spacing="8">
            <Button Content="复制结果" Command="{Binding CopyReplaceResultCommand}" />
          </StackPanel>
        </StackPanel>
      </Border>
      
      <!-- 常用正则表达式 -->
      <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="常用正则表达式" FontSize="18" FontWeight="SemiBold" />
          
          <WrapPanel Orientation="Horizontal">
          </WrapPanel>
        </StackPanel>
      </Border>
      
      <!-- 正则表达式工具 -->
      <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="正则表达式工具" FontSize="18" FontWeight="SemiBold" />
          
          <StackPanel Orientation="Horizontal" Spacing="8">
          </StackPanel>
        </StackPanel>
      </Border>
      
      <!-- 使用说明 -->
      <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="8" Padding="16">
        <StackPanel Spacing="8">
          <SelectableTextBlock Text="使用说明" FontSize="16" FontWeight="SemiBold" />
          <SelectableTextBlock TextWrapping="Wrap">
            <Run Text="1. 在正则表达式输入框中输入要测试的正则表达式" />
            <LineBreak />
            <Run Text="2. 选择合适的匹配选项（忽略大小写、多行模式等）" />
            <LineBreak />
            <Run Text="3. 在测试文本框中输入要匹配的文本" />
            <LineBreak />
            <Run Text="4. 点击&quot;测试匹配&quot;按钮查看匹配结果" />
            <LineBreak />
            <Run Text="5. 使用替换功能可以对匹配的内容进行替换" />
            <LineBreak />
            <Run Text="6. 可以使用常用正则表达式快速开始测试" />
          </SelectableTextBlock>
        </StackPanel>
      </Border>
      
    </StackPanel>
  </ScrollViewer>
</UserControl>
