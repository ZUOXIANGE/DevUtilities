<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:DevUtilities.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="DevUtilities.Views.UuidGeneratorView"
             x:DataType="vm:UuidGeneratorViewModel">
  
  <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
    <StackPanel Margin="24" Spacing="20">
      
      <!-- 标题 -->
      <TextBlock Text="UUID生成器" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,10"/>
      
      <!-- UUID生成区域 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="12">
          <TextBlock Text="UUID生成" FontSize="16" FontWeight="SemiBold"/>
          
          <!-- 格式选择 -->
          <Grid ColumnDefinitions="Auto,10,*">
            <TextBlock Grid.Column="0" Text="格式:" VerticalAlignment="Center"/>
            <ComboBox Grid.Column="2" 
                      ItemsSource="{Binding UuidFormats}" 
                      SelectedItem="{Binding SelectedFormat}"
                      HorizontalAlignment="Stretch"/>
          </Grid>
          
          <!-- 选项 -->
          <StackPanel Orientation="Horizontal" Spacing="20">
            <CheckBox Content="包含连字符" IsChecked="{Binding IncludeHyphens}"/>
            <CheckBox Content="大写字母" IsChecked="{Binding UpperCase}"/>
          </StackPanel>
          
          <!-- 操作按钮 -->
          <StackPanel Orientation="Horizontal" Spacing="10">
            <Button Content="生成" Command="{Binding GenerateNewUuidCommand}"/>
            <Button Content="复制" Command="{Binding CopyUuidCommand}"/>
          </StackPanel>
          
          <!-- 生成结果 -->
          <TextBox Text="{Binding GeneratedUuid}" 
                   IsReadOnly="True" 
                   TextWrapping="Wrap"
                   MinHeight="40"/>
        </StackPanel>
      </Border>
      
      <!-- 批量生成区域 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="12">
          <TextBlock Text="批量生成" FontSize="16" FontWeight="SemiBold"/>
          
          <!-- 数量输入 -->
          <Grid ColumnDefinitions="Auto,10,*,10,Auto,10,Auto">
            <TextBlock Grid.Column="0" Text="数量:" VerticalAlignment="Center"/>
            <NumericUpDown Grid.Column="2" 
                           Value="{Binding GenerateCount}" 
                           Minimum="1" 
                           Maximum="1000"
                           HorizontalAlignment="Stretch"/>
            <Button Grid.Column="4" Content="批量生成" Command="{Binding GenerateBatchCommand}"/>
            <Button Grid.Column="6" Content="复制批量结果" Command="{Binding CopyBatchCommand}"/>
          </Grid>
          
          <!-- 批量结果 -->
          <TextBox Text="{Binding BatchResults}" 
                   IsReadOnly="True" 
                   TextWrapping="Wrap"
                   MinHeight="120"
                   ScrollViewer.VerticalScrollBarVisibility="Auto"/>
        </StackPanel>
      </Border>
      
      <!-- UUID历史记录 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="12">
          <Grid ColumnDefinitions="*,Auto">
            <TextBlock Grid.Column="0" Text="历史记录" FontSize="16" FontWeight="SemiBold"/>
            <Button Grid.Column="1" Content="清空历史" Command="{Binding ClearHistoryCommand}"/>
          </Grid>
          
          <ListBox ItemsSource="{Binding GeneratedHistory}" 
                   MaxHeight="200"
                   ScrollViewer.VerticalScrollBarVisibility="Auto">
            <ListBox.ItemTemplate>
              <DataTemplate>
                <Grid ColumnDefinitions="*,Auto">
                  <TextBlock Grid.Column="0" 
                             Text="{Binding}" 
                             VerticalAlignment="Center"
                             TextTrimming="CharacterEllipsis"/>
                  <Button Grid.Column="1" 
                          Content="复制" 
                          Command="{Binding $parent[ListBox].DataContext.CopyHistoryCommand}"
                          CommandParameter="{Binding}"/>
                </Grid>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
        </StackPanel>
      </Border>
      
    </StackPanel>
  </ScrollViewer>
</UserControl>
