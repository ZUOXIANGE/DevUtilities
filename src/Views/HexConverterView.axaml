<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:DevUtilities.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="DevUtilities.Views.HexConverterView"
             x:DataType="vm:HexConverterViewModel">
  <ScrollViewer VerticalAlignment="Stretch" HorizontalAlignment="Stretch" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
    <StackPanel Margin="20" Spacing="20">
      <!-- 标题 -->
      <SelectableTextBlock Text="十六进制转换器" 
                 FontSize="24" 
                 FontWeight="Bold" 
                 HorizontalAlignment="Center"/>
      
      <SelectableTextBlock Text="支持文本与十六进制之间的相互转换，支持多种字符编码" 
                 FontSize="14" 
                 HorizontalAlignment="Center"
                 Foreground="Gray" 
                 Margin="0,0,0,16"/>

      <!-- 转换设置 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="16">
          <SelectableTextBlock Text="转换设置" FontWeight="Bold" FontSize="16"/>
          
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <SelectableTextBlock Grid.Column="0" Text="字符编码：" VerticalAlignment="Center" Margin="0,0,8,0"/>
            
            <ComboBox Grid.Column="1" 
                      SelectedItem="{Binding SelectedEncoding}"
                      ItemsSource="{Binding AvailableEncodings}"
                      Width="120"
                      Margin="0,0,16,0"/>
            
            <CheckBox Grid.Column="2" 
                      Content="大写输出" 
                      IsChecked="{Binding UseUppercase}"
                      VerticalAlignment="Center"
                      Margin="0,0,16,0"/>
            
            <CheckBox Grid.Column="3" 
                      Content="添加空格" 
                      IsChecked="{Binding AddSpaces}"
                      VerticalAlignment="Center"
                      Margin="0,0,16,0"/>
            
            <CheckBox Grid.Column="4" 
                      Content="添加0x前缀" 
                      IsChecked="{Binding AddPrefix}"
                      VerticalAlignment="Center"/>
          </Grid>
        </StackPanel>
      </Border>

      <!-- 输入文本 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="输入文本" FontWeight="Bold" FontSize="16"/>
          
          <TextBox Text="{Binding InputText}" 
                   AcceptsReturn="True" 
                   TextWrapping="Wrap" 
                   Height="150" 
                   ScrollViewer.VerticalScrollBarVisibility="Auto"
                   Watermark="输入要转换的文本内容" />
          
          <StackPanel Orientation="Horizontal" Spacing="8">
            <Button Content="文本转十六进制" Command="{Binding ConvertToHexCommand}"/>
            <Button Content="十六进制转文本" Command="{Binding ConvertFromHexCommand}"/>
            <Button Content="清空输入" Command="{Binding ClearAllCommand}"/>
            <Button Content="从剪贴板粘贴" Command="{Binding ConvertToHexCommand}"/>
          </StackPanel>
          
          <SelectableTextBlock Text="{Binding ValidationMessage}" 
                     Foreground="Red" 
                     IsVisible="{Binding !IsValidInput}"
                     FontWeight="SemiBold"/>
        </StackPanel>
      </Border>

      <!-- 十六进制输出 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="十六进制输出" FontWeight="Bold" FontSize="16"/>
          
          <TextBox Text="{Binding HexOutput}" 
                   IsReadOnly="True"
                   AcceptsReturn="True" 
                   TextWrapping="Wrap" 
                   Height="150" 
                   ScrollViewer.VerticalScrollBarVisibility="Auto"
                   FontFamily="Consolas"
                   Background="#F8F9FA" />
          
          <StackPanel Orientation="Horizontal" Spacing="8">
            <Button Content="复制十六进制" Command="{Binding CopyHexCommand}"/>
            <Button Content="保存到文件" Command="{Binding CopyHexCommand}"/>
            <Button Content="格式化显示" Command="{Binding ConvertToHexCommand}"/>
          </StackPanel>
        </StackPanel>
      </Border>

      <!-- 文本输出 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="12">
          <SelectableTextBlock Text="文本输出" FontWeight="Bold" FontSize="16"/>
          
          <TextBox Text="{Binding TextOutput}" 
                   IsReadOnly="True"
                   AcceptsReturn="True" 
                   TextWrapping="Wrap" 
                   Height="150" 
                   ScrollViewer.VerticalScrollBarVisibility="Auto"
                   Background="#F8F9FA" />
          
          <StackPanel Orientation="Horizontal" Spacing="8">
            <Button Content="复制文本" Command="{Binding CopyTextCommand}"/>
            <Button Content="保存到文件" Command="{Binding CopyTextCommand}"/>
            <Button Content="清空输出" Command="{Binding ClearAllCommand}"/>
          </StackPanel>
        </StackPanel>
      </Border>

      <!-- 快速转换 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="16">
          <SelectableTextBlock Text="快速转换" FontWeight="Bold" FontSize="16"/>
          
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <StackPanel Grid.Column="0" Spacing="8">
              <SelectableTextBlock Text="常用字符转换" FontWeight="SemiBold"/>
              <StackPanel Spacing="4">
                <Button Content="空格 → 20" Command="{Binding ConvertToHexCommand}" HorizontalAlignment="Left"/>
                <Button Content="换行 → 0A" Command="{Binding ConvertFromHexCommand}" HorizontalAlignment="Left"/>
                <Button Content="制表符 → 09" Command="{Binding ClearAllCommand}" HorizontalAlignment="Left"/>
              </StackPanel>
            </StackPanel>
            
            <Border Grid.Column="1" Width="1" Background="#E0E0E0" Margin="16,0"/>
            
            <StackPanel Grid.Column="2" Spacing="4">
                <SelectableTextBlock Text="工具" FontWeight="SemiBold"/>
                <Button Content="ASCII码表" Command="{Binding ConvertToHexCommand}" HorizontalAlignment="Left"/>
                <Button Content="Unicode查询" Command="{Binding ConvertFromHexCommand}" HorizontalAlignment="Left"/>
                <Button Content="字节计算器" Command="{Binding ClearAllCommand}" HorizontalAlignment="Left"/>
              </StackPanel>
          </Grid>
        </StackPanel>
      </Border>

      <!-- 文件操作 -->
      <Border Background="White" CornerRadius="8" Padding="16" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel Spacing="16">
          <SelectableTextBlock Text="文件操作" FontWeight="Bold" FontSize="16"/>
          
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBox Grid.Column="0" 
                     Text="未选择文件" 
                     IsReadOnly="True"
                     Watermark="选择要转换的文件"
                     Margin="0,0,8,0"/>
            <Button Grid.Column="1" Content="选择文件" Command="{Binding ConvertToHexCommand}" Margin="0,0,8,0"/>
            <Button Grid.Column="2" Content="转换文件" Command="{Binding ConvertFromHexCommand}"/>
          </Grid>
          
          <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
            <Button Content="文件转十六进制" Command="{Binding ConvertToHexCommand}"/>
            <Button Content="十六进制转文件" Command="{Binding ConvertFromHexCommand}"/>
          </StackPanel>
          
          <SelectableTextBlock Text="处理中..." 
                     IsVisible="False"
                     HorizontalAlignment="Center"
                     Foreground="Blue"/>
        </StackPanel>
      </Border>

      <!-- 使用说明 -->
      <Expander Header="使用说明" IsExpanded="False">
        <StackPanel Spacing="12" Margin="10">
          <SelectableTextBlock Text="转换模式" FontWeight="SemiBold"/>
          <StackPanel Spacing="4" Margin="10,0">
            <SelectableTextBlock Text="• 文本转十六进制：将普通文本转换为十六进制表示"/>
            <SelectableTextBlock Text="• 十六进制转文本：将十六进制数据转换回原始文本"/>
            <SelectableTextBlock Text="• 支持多种字符编码：UTF-8、ASCII、Unicode、UTF-32、GB2312"/>
          </StackPanel>
          
          <SelectableTextBlock Text="格式选项" FontWeight="SemiBold" Margin="0,10,0,0"/>
          <StackPanel Spacing="4" Margin="10,0">
            <SelectableTextBlock Text="• 大写输出：控制十六进制字母的大小写"/>
            <SelectableTextBlock Text="• 添加空格：在十六进制数字间添加空格分隔"/>
            <SelectableTextBlock Text="• 添加0x前缀：为每个十六进制数添加0x前缀"/>
          </StackPanel>
          
          <SelectableTextBlock Text="使用场景" FontWeight="SemiBold" Margin="0,10,0,0"/>
          <StackPanel Spacing="4" Margin="10,0">
            <SelectableTextBlock Text="• 数据分析：查看文本的二进制表示"/>
            <SelectableTextBlock Text="• 编程调试：检查字符串的字节内容"/>
            <SelectableTextBlock Text="• 协议分析：解析网络数据包"/>
            <SelectableTextBlock Text="• 文件分析：查看文件的十六进制内容"/>
          </StackPanel>
          
          <SelectableTextBlock Text="使用提示" FontWeight="SemiBold" Margin="0,10,0,0"/>
          <StackPanel Spacing="4" Margin="10,0">
            <SelectableTextBlock Text="• 输入十六进制时可以包含空格和0x前缀"/>
            <SelectableTextBlock Text="• 支持大文件的十六进制转换"/>
            <SelectableTextBlock Text="• 转换结果可以保存到文件"/>
            <SelectableTextBlock Text="• 提供常用字符的快速转换"/>
          </StackPanel>
        </StackPanel>
      </Expander>
    </StackPanel>
  </ScrollViewer>
</UserControl>

